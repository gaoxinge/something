# open source

## 序列化

### hessian

- 类型标签|定长字节
- 类型标签|字节长度|变长字节
- 类型标签|定长字节...|结束符

### protobuf

- 类型标签|定长字节
- 类型标签|字节长度|变长字节

### hessian vs protobuf

- 反射 vs IDL

## 协议

### http

#### http1.0

##### 格式

- 请求行/响应行
- 请求头/响应头
- 请求数据/响应数据

##### 特点

- 一个TCP连接承载一个HTTP的响应和请求

#### http1.1
 
##### 格式

- 请求行/响应行
- 请求头/响应头
- 请求数据/响应数据

##### 改动

- 持久连接
- 请求管道化
- 增加缓存处理
- 增加断点续传

##### 特点

- 一个TCP连接承载多个HTTP的响应和请求
- 默认非管道化：下一个HTTP请求需要等待上一个HTTP响应结束
- 提出管道化：下一个HTTP请求不需要等待上一个HTTP响应结束，但是响应顺序需要和请求顺序保持一致

#### http2

##### 格式

- 头帧
- 数据帧

##### 改动

- 二进制分帧
- 头部压缩
- 多路复用
- 服务器推送

##### 特点

- 增加了流和帧的概念
  - 帧：相当于之前的一个HTTP消息，会关联一个流的ID
  - 流：包含多个相关联的帧，会关联一个TCP连接
- 一个TCP连接会承载多个流，响应顺序不需要和请求顺序保持一致

### grpc

- 基于http2

### 参考

- [一文读懂 HTTP/2 特性](https://zhuanlan.zhihu.com/p/26559480)
- [HTTP/2 相比 1.0 有哪些重大改进？](https://www.zhihu.com/question/34074946)
- [HTTP 2.0 和 HTTP 1.1 相比有哪些优势呢？](https://www.zhihu.com/question/306768582)

## 服务治理

- 单体应用
- 总线架构
- 微服务
- service mesh
- serverless = faas + baas
