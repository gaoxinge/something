# mysql

## 架构

- client
- server
- storage

## storage

- innodb: B+树
- myisam

## storage engine

### 考虑

- 读
  - 键查询
  - 小范围查询（磁盘IO）
  - 范围查询
- 写
- 空间

### 对比

- 数组/链表
  - 平均复杂度O(n)，慢
- 二叉树
  - 普通二叉树平均复杂度O(logn)，最坏复杂度O(n)，不稳定
  - 平衡二叉树最坏复杂度O(logn)，但对磁盘IO不友好
- 哈希表
  - 平均复杂度O(1)，不稳定
- 跳表
  - 平均复杂度O(logn)，不稳定
- B树
  - 从根节点开始，高度保持固定，每层有多个节点，每个节点有多个键/索引
  - 数据存放在内部节点和叶子节点上
  - 稳定的键查询，对磁盘IO友好，不支持范围查询
- B+树
  - 从根节点开始，高度保持固定，每层有多个节点，每个节点有多个键/索引
  - 键/索引存放在内部节点上，数据存放在叶子节点上，而且叶子节点使用链表连接
  - 稳定的键查询，对磁盘IO友好，支持范围查询
- LSM
  - 读放大：compaction，bloomfilter
  - 空间放大：compaction

## index
