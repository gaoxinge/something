# os

## 进程和线程的区别

- 进程和线程的关系
  - 进程是操作系统资源分配的最小单位，线程是cpu调度的最小单位
  - 线程依赖进程
  - 一个进程可以有多个线程
- 进程切换和线程切换的区别
  - 进程切换
    - 内存：虚拟地址对应的页切换
    - 栈：用户栈和内核栈
    - 寄存器
  - 线程切换
    - 栈：用户栈和内核栈
    - 寄存器
- 进程间和线程间共享资源的区别
  - 父子进程共享
    - 共享
      - ID
      - 目录
      - 文件
    - 私有
      - PID，PPID
  - 线程共享
    - 共享
      - 堆
      - 文件
    - 私有
      - 栈
      - 寄存器
- 进程间和线程间通信，同步，共享数据的方式的区别
  - 进程
    - PIPE
    - FIFO
    - 消息队列
    - 文件，文件描述符，文件锁
    - 信号量
    - 共享内存：shm，mmap
    - socket
    - socketpair
  - 线程
    - 共享内存：堆

## 线程和协程的区别

- 线程和协程的关系
  - 协程运行依赖线程运行
  - 多个协程可以在多个线程上调度
- 线程切换和协程切换的区别
  - 线程切换
    - 贴近操作系统层
    - 粒度大
    - 函数不会因为阻塞操作暂停，从线程切出，把线程所有权释放给其他函数切入运行
  - 协程切换
    - 贴近用户层
    - 粒度小
    - 函数会因为阻塞操作（或者显示的切换），从线程切出，把线程所有权释放给其他函数切入运行
